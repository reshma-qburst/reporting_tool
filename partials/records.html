<div id="recordsMain" ng-controller="chartController">
    <h1 id="recordHeading">Event Record</h1>
    <table id="recordsTable" ng-cloak>
        <thead>
            <tr>
                <th></th>
                <th colspan="3">Events</th>
                <th colspan="1">Score</th>
            </tr>
            <tr>
                <th><a ng-click="orderByField='name'; reverseSort = !reverseSort">Driver Name</th>
                <th><a ng-click="orderByField='sumBreak'; reverseSort = !reverseSort">HB</th>
                <th><a ng-click="orderByField='sumAcc'; reverseSort = !reverseSort">RA</th>
                <th><a ng-click="orderByField='sumTurn'; reverseSort = !reverseSort">SC</th>
                <th><a ng-click="orderByField='total'; reverseSort = !reverseSort">Total</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="i in tableData|orderBy : orderByField : reverseSort">
                <td>{{i.name}}</td>
                <td>{{i.sumBreak}}</td>
                <td>{{i.sumAcc}}</td>
                <td>{{i.sumTurn}}</td>
                <td>{{i.total}}</td>
            </tr>
        </tbody>
    </table>
    <div id="filterDiv">
        <select ng-model="filterName" ng-options="item for item in filterOptions" ng-init="filterName=filterOptions[0]" ng-change="showChart();" id="filterId"></select>
    </div>
    <button class="toggleButton" ng-click="toggleChartAndMap();">Toggle between chart and map</button>
    <bar-chart height="options.height" data="data" hovered="hovered(args)" ng-if="tableData" ng-hide="filterFlag == 0 || !customBChart"></bar-chart>
    <stackbarchart ng-if="tableData && filterFlag == 0 && customSChart" id="d3stackbar"></stackbarchart>

    <ng-map ng-show="customMap" zoom="{{map.zoom}}" center="{{map.center.latitude}},{{map.center.longitude}}" control="{{map.control}}">
        <marker ng-repeat="pos in positions|limitTo:4" position="{{pos.lat}},{{pos.lng}}"></marker>
          <directions 
          draggable="true"
          panel="directions-panel"
          travel-mode="DRIVING"
          waypoints="{{wayPoints}}"
          origin="map.center.latitude"
          destination="map.center.longitude">
        </directions>
    </ng-map>
</div>
